import React from 'react';
import { AnalysisResult } from '../types';
import { Radar, RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, ResponsiveContainer } from 'recharts';

interface PDFReportTemplateProps {
    data: AnalysisResult;
}

export const PDFReportTemplate: React.FC<PDFReportTemplateProps> = ({ data }) => {
    const cleanText = (text: string) => text.replace(/[*_#]/g, '').trim();

    // Colors from the design
    const THEME = {
        darkBlue: '#0F0F25',
        pink: '#ED1164',
        green: '#22c55e',
        textDark: '#1e293b',
        textLight: '#64748b'
    };

    return (
        <div id="pdf-report-target" className="w-[794px] bg-white text-slate-900 font-sans hidden-on-screen">

            {/* --- PAGE 1: COVER --- */}
            <div className="w-full h-[1123px] relative bg-[#1a0b2e] overflow-hidden flex flex-col justify-between p-12 text-white page-break">
                {/* Background Image from User */}
                <div className="absolute inset-0 z-0">
                    <img src="/report-cover-bg.png" className="w-full h-full object-cover" alt="Cover Background" />
                </div>

                {/* Top Right Header */}
                <div className="flex justify-end pt-8 relative z-10">
                    <div className="text-right">
                        <h3 className="text-[12px] font-bold tracking-[0.2em] uppercase text-white/80 mb-1">Assessment Report</h3>
                        <p className="text-lg font-bold text-white tracking-widest">{new Date().toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: '2-digit' }).toUpperCase()}</p>
                    </div>
                </div>

                {/* Spacer to push footer down (Logo is in the background image now) */}
                <div className="flex-1"></div>

                {/* Bottom Footer Area */}
                <div className="flex justify-between items-end pb-8 z-10 relative">
                    <div>
                        <h1 className="text-7xl font-extrabold leading-none tracking-tight text-white">
                            {data.userData?.name || "Future Leader"}<br />
                            <span className="text-4xl opacity-50 block mt-2"> </span>
                        </h1>
                    </div>
                    <div className="text-right opacity-60 text-sm font-medium tracking-wide">
                        pathfinder.appli.global
                    </div>
                </div>
            </div>

            {/* --- PAGE 2: ARCHETYPE & MATCH --- */}
            <div className="w-full h-[1123px] relative bg-white p-16 flex flex-col page-break">
                {/* Match Score Hero Section */}
                <div className="relative h-[350px] bg-white rounded-3xl overflow-hidden mb-12 border border-slate-100">
                    {/* Background Graph - Subtle */}
                    <div className="absolute inset-0 opacity-10">
                        <img
                            src="/match-graph.png"
                            alt="Match Graph"
                            className="w-full h-full object-cover"
                            style={{ imageRendering: 'crisp-edges' }}
                        />
                    </div>

                    {/* Background Graph - Behind Percentage (More Visible) */}
                    <div className="absolute top-0 right-0 w-1/3 h-full opacity-20">
                        <img
                            src="/match-graph.png"
                            alt="Match Graph"
                            className="w-full h-full object-cover"
                            style={{ imageRendering: 'crisp-edges' }}
                        />
                    </div>

                    {/* Green Dot Indicator */}
                    <div className="absolute top-8 right-8 w-4 h-4 bg-[#22c55e] rounded-full shadow-lg"></div>

                    {/* Content */}
                    <div className="relative z-10 h-full flex items-center justify-start px-16">
                        {/* Large Score Numbers */}
                        <div className="flex items-center gap-6">
                            <span className="text-[200px] leading-none font-extrabold text-[#22c55e] tracking-tighter">
                                98
                            </span>
                            <div className="flex flex-col items-start justify-center">
                                <span className="text-5xl font-extrabold text-[#0F0F25] leading-none">Match</span>
                                <span className="text-5xl font-extrabold text-[#0F0F25] leading-none">Score</span>
                                <span className="text-7xl font-extrabold text-[#0F0F25] leading-none mt-2">%</span>
                            </div>
                        </div>
                    </div>
                </div>

                {/* Archetype Info */}
                <div className="mt-12">
                    <div className="text-sm font-bold tracking-[0.2em] text-slate-400 uppercase mb-4">Archetype Identified</div>
                    <h2 className="text-6xl font-extrabold text-[#0F0F25] mb-8">{cleanText(data.archetype.title)}</h2>
                    <p className="text-2xl leading-relaxed text-slate-600 font-light text-justify">
                        {cleanText(data.archetype.description)}
                    </p>
                </div>
            </div>

            {/* --- PAGE 3: DRIVERS --- */}
            <div className="w-full h-[1123px] bg-white p-16 flex flex-col justify-center page-break">
                <h2 className="text-xl font-bold tracking-[0.2em] text-slate-500 uppercase mb-12">What Drives You</h2>

                <div className="space-y-8">
                    {[
                        { title: "Academic Driver", icon: "/icon-academic.png", data: data.archetype.drivers.academic },
                        { title: "Passion Driver", icon: "/icon-passion.png", data: data.archetype.drivers.passion },
                        { title: "Cognitive Style", icon: "/icon-cognitive.png", data: data.archetype.drivers.cognitive },
                        { title: "Preferred Domain", icon: "/icon-domain.png", data: data.archetype.drivers.domain },
                        { title: "Core Motivation", icon: "/icon-motivation.png", data: data.archetype.drivers.motivation },
                    ].map((driver, i) => (
                        <div key={i} className="flex gap-6 items-start pb-8 border-b border-slate-200 last:border-0">
                            <div className="w-16 h-16 rounded-full bg-slate-50 flex items-center justify-center shrink-0 p-3 shadow-sm border border-slate-100">
                                <img src={driver.icon} alt={driver.title} className="w-full h-full object-contain" />
                            </div>
                            <div className="flex-1">
                                <h3 className="text-2xl font-bold text-[#0F0F25] mb-2">{driver.title}</h3>
                                <p className="text-lg text-slate-600 leading-relaxed">
                                    {cleanText(driver.data.explanation)}
                                </p>
                            </div>
                        </div>
                    ))}
                </div>
            </div>

            {/* --- PAGE 4: VISION BOARD --- */}
            <div className="w-full h-[1123px] max-h-[1123px] bg-white flex flex-col page-break overflow-hidden">
                {/* Top Half: Day in Life */}
                <div className="p-12 flex-1 flex flex-col justify-center">
                    <h4 className="text-sm font-bold tracking-[0.2em] text-slate-400 uppercase mb-2">Your Career Vision Board</h4>
                    <h2 className="text-5xl font-extrabold text-[#ED1164] mb-6 leading-tight">A Day in Your<br />Future Life</h2>
                    <p className="text-xl leading-relaxed text-slate-700">
                        {cleanText(data.visionBoard.futureSelf)}
                    </p>
                </div>

                {/* Bottom Half: Dark Themes (Split Layout) */}
                <div className="h-[55%] flex min-h-0">
                    {/* Left: Core Themes Visual (Full Bleed - No Letterboxing) */}
                    <div className="w-[65%] relative overflow-hidden bg-transparent">
                        {/* 
                            Cover Container 
                            min-w-full + min-h-full + aspect-square ensures the box is always 
                            at least as big as the parent's largest dimension, covering fully.
                        */}
                        <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 min-w-full min-h-full aspect-square">
                            {/* Background Visual */}
                            <img
                                src="/core-themes-bg.png"
                                alt="Core Themes"
                                className="w-full h-full object-cover"
                            />

                            {/* Themes Overlay - Locked to the Image Coordinates */}

                            {/* Top Left Circle */}
                            {data.visionBoard.keyThemes[0] && (
                                <div className="absolute top-[12%] left-[12%] w-[30%] h-[30%] flex items-center justify-center text-center">
                                    <span className="text-white font-bold text-xl tracking-wide drop-shadow-md leading-tight">{data.visionBoard.keyThemes[0]}</span>
                                </div>
                            )}

                            {/* Top Right Circle */}
                            {data.visionBoard.keyThemes[1] && (
                                <div className="absolute top-[12%] right-[12%] w-[30%] h-[30%] flex items-center justify-center text-center">
                                    <span className="text-white font-bold text-xl tracking-wide drop-shadow-md leading-tight">{data.visionBoard.keyThemes[1]}</span>
                                </div>
                            )}

                            {/* Bottom Left Circle */}
                            {data.visionBoard.keyThemes[2] && (
                                <div className="absolute bottom-[12%] left-[12%] w-[30%] h-[30%] flex items-center justify-center text-center">
                                    <span className="text-white font-bold text-xl tracking-wide drop-shadow-md leading-tight">{data.visionBoard.keyThemes[2]}</span>
                                </div>
                            )}

                            {/* Bottom Right Circle */}
                            {data.visionBoard.keyThemes[3] && (
                                <div className="absolute bottom-[12%] right-[12%] w-[30%] h-[30%] flex items-center justify-center text-center">
                                    <span className="text-white font-bold text-xl tracking-wide drop-shadow-md leading-tight">{data.visionBoard.keyThemes[3]}</span>
                                </div>
                            )}
                        </div>
                    </div>

                    {/* Right: Quote Area */}
                    <div className="w-[35%] bg-[#ED1164] p-12 flex flex-col justify-between relative">
                        <div className="flex-1 flex items-center">
                            <p className="text-white font-serif text-3xl leading-snug font-medium italic">
                                "{cleanText(data.visionBoard.quote)}"
                            </p>
                        </div>
                        <div className="text-white text-lg font-medium text-right mt-4">
                            Steve Jobs
                        </div>
                    </div>
                </div>
            </div>

            {/* --- PAGE 5: SKILL SIGNATURE --- */}
            <div className="w-full h-[1123px] bg-white p-16 flex flex-col page-break">
                <div className="text-center mb-12">
                    <h2 className="text-5xl font-extrabold text-[#0F0F25] mb-2">Skill Signature</h2>
                    <p className="text-slate-500 text-lg">A Visual map of your core capabilities</p>
                </div>

                {/* Radar Chart */}
                <div className="flex-1 flex items-center justify-center relative">
                    {/* Background Hexagon SVG for style matching */}
                    <div className="absolute inset-0 flex items-center justify-center -z-10 opacity-5">
                        <svg viewBox="0 0 400 400" className="w-[600px] h-[600px]">
                            <polygon points="200,20 373,120 373,320 200,420 27,320 27,120" fill="#f472b6" />
                        </svg>
                    </div>

                    <div className="w-[600px] h-[500px]">
                        <ResponsiveContainer width="100%" height="100%">
                            <RadarChart cx="50%" cy="50%" outerRadius="80%" data={data.skillSignature}>
                                <PolarGrid stroke="#e2e8f0" />
                                <PolarAngleAxis dataKey="subject" tick={{ fill: '#64748b', fontSize: 14, fontWeight: 500 }} />
                                <PolarRadiusAxis angle={30} domain={[0, 100]} tick={false} axisLine={false} />
                                <Radar
                                    name="Aptitude"
                                    dataKey="A"
                                    stroke="#ED1164"
                                    strokeWidth={4}
                                    fill="#ED1164"
                                    fillOpacity={0.8}
                                    isAnimationActive={false}
                                />
                            </RadarChart>
                        </ResponsiveContainer>
                    </div>
                </div>

                {/* Progress Bars */}
                <div className="grid grid-cols-2 gap-x-16 gap-y-8 mt-12">
                    {data.skillSignature.map((skill, i) => (
                        <div key={i}>
                            <div className="flex justify-between text-sm font-bold text-slate-700 mb-2">
                                <span>{skill.subject}</span>
                                <span className="text-slate-400">{skill.A}%</span>
                            </div>
                            <div className="w-full bg-slate-100 h-2 rounded-full overflow-hidden">
                                <div className="h-full bg-[#ED1164]" style={{ width: `${skill.A}%` }}></div>
                            </div>
                        </div>
                    ))}
                </div>
            </div>

            {/* --- PAGE 6: TOP RECOMMENDATIONS --- */}
            <div className="w-full h-[1123px] bg-white p-16 flex flex-col page-break">
                <h2 className="text-xl font-bold tracking-[0.2em] text-slate-500 uppercase mb-16">Top Course Recommendations</h2>

                <div className="space-y-10">
                    {data.recommendations.map((rec, i) => (
                        <div key={i} className="flex gap-8 items-start pb-8 border-b border-slate-200 last:border-0">
                            {/* Blue Document Icon */}
                            {/* Blue Document Icon with Image */}
                            <div className="w-32 h-40 relative shrink-0">
                                <img src="/icon-doc-blue.png" alt="Degree Icon" className="w-full h-full object-contain drop-shadow-xl" />

                                {/* Overlay Degree Text - Center Top part of the icon */}
                                <div className="absolute top-8 left-0 w-full text-center text-white font-serif text-2xl font-bold px-2">
                                    {rec.degree ? rec.degree.split(' ')[0].replace('.', '') : 'DEG'}
                                </div>

                                {/* Overlay Match Score - Bottom Green Pill Area */}
                                <div className="absolute bottom-[10px] left-0 w-full text-center text-white text-[10px] font-bold">
                                    {rec.relevanceScore}% Match
                                </div>
                            </div>

                            {/* Content */}
                            <div className="flex-1 pt-2">
                                <h3 className="text-xl font-bold text-slate-900 mb-2 leading-snug">{cleanText(rec.courseName)}</h3>
                                <p className="text-sm text-slate-600 leading-relaxed mb-3 text-justify">{cleanText(rec.matchReason)}</p>

                                {/* Insight Box */}
                                <div className="bg-slate-50 rounded-xl p-3 flex gap-3 border border-slate-100">
                                    <div className="text-[#1d4ed8]">
                                        <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
                                    </div>
                                    <p className="text-xs text-slate-500 leading-relaxed">
                                        <strong className="text-slate-700">AI Insight:</strong> {cleanText(rec.dataInsight)}
                                    </p>
                                </div>
                            </div>
                        </div>
                    ))}
                </div>
            </div>

            {/* --- PAGE 7: STATED PREFERENCE (NEW) --- */}
            {data.degreePreferenceAnalysis && (
                <div className="w-full h-[1123px] bg-white p-16 flex flex-col page-break relative overflow-hidden">
                    {/* Background blob for style */}
                    <div className="absolute top-0 right-0 w-[500px] h-[500px] bg-purple-50 rounded-full blur-[100px] pointer-events-none -z-10 translate-x-1/3 -translate-y-1/3"></div>

                    {/* Header */}
                    <div className="mb-12">
                        <h2 className="text-4xl font-extrabold text-[#1a1a2e] mb-4">Your Stated Preference</h2>
                        <p className="text-slate-500 text-lg leading-relaxed">
                            You mentioned interest in <span className="font-bold text-[#ED1164]">{data.degreePreferenceAnalysis.statedPreference}</span>.
                            Hereâ€™s how well it aligns with your personality profile:
                        </p>
                    </div>

                    {/* Overall Assessment Box - Green Style */}
                    <div className="mb-16 p-8 bg-[#f0fdf4] rounded-2xl border border-green-100 flex gap-6 items-start">
                        <div className="w-12 h-12 rounded-full bg-white border border-green-200 flex items-center justify-center shrink-0 shadow-sm">
                            <svg className="w-6 h-6 text-[#22c55e]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
                        </div>
                        <div>
                            <h4 className="font-bold text-[#15803d] text-base mb-1">Overall Assessment</h4>
                            <p className="text-[#166534] text-sm leading-relaxed">{data.degreePreferenceAnalysis.overallInsight}</p>
                        </div>
                    </div>

                    {/* Matching Programs Title */}
                    <h2 className="text-xl font-bold tracking-[0.2em] text-slate-500 uppercase mb-12">Matching Programs & Fit Analysis</h2>

                    {/* Cards */}
                    <div className="space-y-12">
                        {data.degreePreferenceAnalysis.matchedCourses.map((course, i) => (
                            <div key={i} className="flex gap-8 items-start relative">
                                {/* CSS-Only Purple Document Card (Refined & Print-Safe) */}
                                <div
                                    className="w-28 h-36 relative shrink-0 rounded-xl overflow-hidden shrink-0 shadow-lg"
                                    style={{
                                        printColorAdjust: 'exact',
                                        WebkitPrintColorAdjust: 'exact',
                                        backgroundColor: '#7F00FF', // Fallback
                                        backgroundImage: 'linear-gradient(135deg, #8B5CF6 0%, #6D28D9 100%)'
                                    }}
                                >
                                    {/* Main Vivid Purple Gradient Body */}
                                    <div className="absolute inset-0 bg-gradient-to-br from-[#8B5CF6] to-[#6D28D9]"></div>

                                    {/* Realistic Folded Corner (Top Left) */}
                                    {/* White Corner Triangle */}
                                    <div className="absolute top-0 left-0 w-8 h-8 bg-white z-20"
                                        style={{
                                            clipPath: 'polygon(0 0, 100% 100%, 0 100%)',
                                            background: 'linear-gradient(135deg, #f3f4f6 0%, #ffffff 50%, #e5e7eb 100%)',
                                            boxShadow: '1px 1px 4px rgba(0,0,0,0.3)',
                                            printColorAdjust: 'exact',
                                            WebkitPrintColorAdjust: 'exact'
                                        }}>
                                    </div>
                                    {/* Shadow under the curl */}
                                    <div className="absolute top-0 left-0 w-8 h-8 z-10"
                                        style={{
                                            background: 'linear-gradient(135deg, rgba(0,0,0,0.4) 0%, transparent 60%)',
                                            filter: 'blur(1px)'
                                        }}>
                                    </div>
                                    <div className="absolute top-0 left-0 w-8 h-8 bg-white z-0"></div>


                                    {/* Degree Text Check - Serif Font */}
                                    <div className="absolute inset-0 flex items-center justify-center pb-10">
                                        <span className="text-white font-serif text-3xl font-bold tracking-tight drop-shadow-[0_2px_4px_rgba(0,0,0,0.2)]">
                                            {course.degree.split(' ')[0].replace('.', '')}
                                        </span>
                                    </div>

                                    {/* Match Score Pill - Teal/Green Gradient (Static - As requested) */}
                                    <div
                                        className="absolute bottom-0 left-0 right-0 h-9 flex items-center justify-center z-10"
                                        style={{
                                            printColorAdjust: 'exact',
                                            WebkitPrintColorAdjust: 'exact',
                                            background: 'linear-gradient(90deg, #10B981, #0D9488)', // Static Green/Teal
                                        }}
                                    >
                                        {/* Optional Glass Shine */}
                                        <div className="absolute top-0 left-0 right-0 h-[1px] bg-white/40"></div>

                                        <span className="text-white text-[11px] font-bold tracking-wide drop-shadow-sm">
                                            {course.matchPercentage}% Match
                                        </span>
                                    </div>
                                </div>

                                {/* Content */}
                                <div className="flex-1 pt-2">
                                    <h3 className="text-2xl font-bold text-slate-900 mb-2">{course.courseName}</h3>
                                    <p className="text-slate-600 leading-relaxed text-sm text-justify">{course.matchInsight}</p>
                                </div>

                                {/* Divider Line (except last) */}
                                {i < data.degreePreferenceAnalysis!.matchedCourses.length - 1 && (
                                    <div className="absolute -bottom-6 left-36 right-0 h-px bg-slate-100"></div>
                                )}
                            </div>
                        ))}
                    </div>

                    {/* Spacer */}
                    <div className="flex-1"></div>

                    {/* Footer Note */}
                    <div className="bg-slate-50 p-4 rounded-xl text-center">
                        <p className="text-[10px] text-slate-400 uppercase tracking-wide">
                            NOTE: These match percentages reflect how well your stated preference aligns with your personality profile based on your quiz responses.
                        </p>
                    </div>
                </div>
            )}

            {/* --- PAGE 8: ALTERNATIVES & COMMUNITY --- */}
            <div className="w-full h-[1123px] bg-white p-16 flex flex-col page-break">

                {/* Alternatives Section */}
                <div className="mb-16">
                    <h2 className="text-xl font-bold tracking-[0.2em] text-slate-500 uppercase mb-12">Alternative Pathways</h2>
                    <div className="grid grid-cols-3 gap-6">
                        {data.alternativePathways.map((alt, i) => (
                            <div key={i} className="flex flex-col gap-4 border-r border-slate-200 last:border-0 pr-6 last:pr-0">
                                {/* Pink Document Icon */}
                                {/* Pink Document Icon with Image */}
                                <div className="w-24 h-32 relative shrink-0 mx-auto">
                                    <img src="/icon-doc-pink.png" alt="Course Icon" className="w-full h-full object-contain drop-shadow-lg" />

                                    {/* Overlay Course Abbr */}
                                    <div className="absolute top-6 left-0 w-full text-center text-white font-serif text-lg font-bold px-1">
                                        {(() => {
                                            const name = alt.courseName.toLowerCase();
                                            if (name.includes('bachelor of business administration') || name.includes('bba')) return 'BBA';
                                            if (name.includes('bachelor of computer applications') || name.includes('bca')) return 'BCA';
                                            if (name.includes('bachelor of commerce') || name.includes('b.com')) return 'B.Com';
                                            if (name.includes('bachelor of science') || name.includes('b.sc')) return 'B.Sc';
                                            if (name.includes('bachelor of arts') || name.includes('b.a')) return 'B.A.';
                                            if (name.includes('bachelor of technology') || name.includes('b.tech')) return 'B.Tech';
                                            if (name.includes('bachelor of engineering') || name.includes('b.e')) return 'B.E.';
                                            if (name.includes('bachelor of design') || name.includes('b.des')) return 'B.Des';
                                            if (name.includes('bachelor of architecture') || name.includes('b.arch')) return 'B.Arch';
                                            if (name.includes('mbbs') || name.includes('medicine')) return 'MBBS';
                                            if (name.includes('master of business administration') || name.includes('mba')) return 'MBA';
                                            if (name.includes('master of science') || name.includes('m.sc')) return 'M.Sc';
                                            if (name.includes('master of arts') || name.includes('m.a')) return 'M.A.';
                                            if (name.includes('master of technology') || name.includes('m.tech')) return 'M.Tech';

                                            // Fallback smart abbreviation
                                            const parts = alt.courseName.split(' ');
                                            if (parts[0] === 'Bachelor') return 'Deg.';
                                            if (parts[0] === 'Master') return 'Mast.';
                                            return parts[0].substring(0, 4);
                                        })()}
                                    </div>

                                    {/* Overlay Match Score */}
                                    <div className="absolute bottom-[8px] left-0 w-full text-center text-white text-[9px] font-bold">
                                        {alt.relevanceScore || 85}% Match
                                    </div>
                                </div>

                                <div className="text-center">
                                    <div className="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">{cleanText(alt.focus)}</div>
                                    <h4 className="font-bold text-slate-900 mb-2 leading-tight h-10 overflow-hidden text-sm">{cleanText(alt.courseName)}</h4>
                                    <p className="text-[10px] text-slate-500 leading-relaxed line-clamp-4">{cleanText(alt.insight)}</p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>

                {/* Divider */}
                <div className="w-full h-px bg-slate-100 mb-12"></div>

                {/* Community Insights Section */}
                <div className="flex-1 bg-[#F5F3F0] min-h-0 rounded-3xl p-12 relative overflow-hidden">
                    {/* Header with Title and Avatars */}
                    <div className="flex items-center justify-between mb-4 relative z-10">
                        <div className="flex-1">
                            <h2 className="text-4xl font-extrabold text-[#1a1a2e] leading-tight">Community Insights</h2>
                        </div>
                        <div className="flex-shrink-0 ml-8">
                            <img
                                src="/community-avatars.png"
                                alt="Community Members"
                                className="h-16 w-auto object-contain"
                                style={{
                                    imageRendering: 'crisp-edges', // Try to keep it sharp
                                    printColorAdjust: 'exact',
                                    WebkitPrintColorAdjust: 'exact'
                                }}
                            />
                        </div>
                    </div>
                    <p className="text-slate-600 text-base mb-10 relative z-10">{cleanText(data.communityStats.headline)}</p>

                    <div className="grid grid-cols-2 gap-12 relative z-10">
                        {/* Common Career Paths */}
                        <div>
                            <h4 className="font-bold text-slate-400 uppercase text-xs tracking-wider mb-6">Common Career Paths</h4>
                            <div className="space-y-6">
                                {data.communityStats.topCareers.map((career, i) => (
                                    <div key={i}>
                                        <div className="flex justify-between text-sm mb-1 font-bold text-slate-700">
                                            <span>{cleanText(career.name)}</span>
                                            <span>{career.percentage}%</span>
                                        </div>
                                        <div className="w-full bg-slate-200 rounded-full h-2">
                                            <div className="bg-[#ED1164] h-2 rounded-full" style={{ width: `${career.percentage}%` }}></div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Shared Interests */}
                        <div>
                            <h4 className="font-bold text-slate-400 uppercase text-xs tracking-wider mb-6">Shared Interests</h4>
                            <div className="flex flex-wrap gap-3">
                                {data.communityStats.commonInterests.map((interest, i) => (
                                    <span key={i} className="px-4 py-2 bg-slate-200/50 rounded-lg text-xs font-bold text-slate-700">
                                        {cleanText(interest)}
                                    </span>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    );
};
